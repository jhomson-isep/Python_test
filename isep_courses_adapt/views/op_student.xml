<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="view_op_student_tree_extended" model="ir.ui.view">
            <field name="model">op.student</field>
            <field name="inherit_id"
                   ref="openeducat_core.view_op_student_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='blood_group']" position="replace">
                    <field name="blood_group" invisible="1"/>
                </xpath>
            </field>
        </record>

        <record id="view_op_student_form_extended" model="ir.ui.view">
            <field name="model">op.student</field>
            <field name="inherit_id" ref="openeducat_core.view_op_student_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page/group[@name='address']" position="replace"/>
                <xpath expr="//button[1]" position="after">
                    <button name="import_student_access" string="Get access"
                            type="object"/>
                </xpath>
                <xpath expr="//notebook/page/group[@name='personal_detail']" position="replace">
                    <group cols="4">
                        <sheet string="group_information_1">
                            <group string="System Data">
                                <field name="partner_id" placeholder="Partner" required="0"/>
                                <field name="user_id" string="Usuario" readonly="1"/>
                                <field name="category_id"/>
                                <field name="delay"/>
                            </group>
                            <group string="Personal Data">
                                <field name="nationality"/>
                                <field name="lang"/>
                                <field name="place_birth"/>
                                <field name="birth_date" required="1"/>
                                <field name="gender"/>
                                <field name="document_type_id"/>
                                <field name="document_number"/>
                                <field name="visa_info" string="Documentos de IdentificaciÃ³n"/>
                                <field name="curp" invisible="1"/> <!--It is believed to appear in the list of values-->
                            </group>
                        </sheet>
                        <sheet string="group_information_2">
                            <group string="Contact Details">
                                <field name="mobile" required="1"/>
                                <field name="phone"/>
                                <field name="email" required="1"/>
                                <label for="type"/>
                                <div name="div_type">
                                    <field class="oe_inline" name="type"/>
                                </div>
                                <label for="street" string="Address"/>
                                <div name="div_address">
                                    <field name="street" placeholder="Street..."/>
                                    <field name="street2" placeholder="Street2"/>
                                    <div class="address_format">
                                        <field name="city" placeholder="City" style="width: 40%%"/>
                                        <field name="state_id" class="oe_no_button" placeholder="State"
                                               style="width: 37%%" options='{"no_open": True}'/>
                                        <field name="zip" placeholder="ZIP" style="width: 20%%"/>
                                    </div>
                                    <field name="country_id"
                                           placeholder="Country" class="oe_no_button"
                                           options='{"no_open": True}'/>
                                </div>
                                <field name="emergency_contact" context="{'show_address': 1}"
                                       options='{"always_reload": True}'/>
                            </group>
                            <group string="Academic data">
                                <field name="gr_no" readonly="1"/>
                                <field name="university_id" string="Universidad de Procedencia"/>
                                <field name="study_type_id" options="{'no_create': True}"/>
                                <field name="year_end_studies"/>
                                <field name="sepyc_program"/>
                                <field name="uvic_program"/>
                                <field name="status_documentation"
                                       attrs="{'invisible':[('uvic_program','=', False),('sepyc_program','=',False)]}"/>
                                <field name="status_student" readonly="1"/>
                                <field name="type_of_course_taken" readonly="1" widget="many2many_tags"/>
                            </group>
                        </sheet>
                    </group>
                </xpath>
                <xpath expr="//form/sheet/notebook/page/group/field[@name='course_detail_ids']" position="before">
                    <group colspan="4">
                        <field name="admission_ids"
                               nolabel="1">
                            <tree string="Course Details">
                                <field name="admission_date"/>
                                <field name="course_id"/>
                                <field name="batch_id"/>
                                <field name="admission_date"/>
                                <field name="due_date"/>
                                <field name="unsubscribed_date"/>
                                <field name="state" invisible="1"/>
                            </tree>
                        </field>
                    </group>

                </xpath>


                <notebook position="inside">
                    <page name="documentation" string="Documentation">
                        <field name="document_ids" colspan="4" nolabel="1"/>
                    </page>
                    <page name="access" string="Access">
                        <group string="Moodle data" col="4" colspan="4" name="moodle_info">
                            <field name="moodle_user"/>
                            <field name="moodle_pass"/>
                        </group>
                        <group>
                            <field name="access_ids" colspan="4" nolabel="1"/>
                        </group>
                    </page>
                    <page name="attendees" string="Exam attendees">
                        <field name="exam_attendees_ids" colspan="4" nolabel="1"/>
                    </page>
                </notebook>

                <xpath expr="//button[@name='toggle_active']" position="before">
                    <button class="btn oe_stat_button" type="object" name="action_open_admissions"
                            style="border-right: 1px solid;" icon="fa-bullseye">
                        <field string="Admissions" name="admission_count" widget="statinfo"/>
                    </button>
                </xpath>

            </field>
        </record>

        <record id="view_op_student_form_library_extends" model="ir.ui.view">
            <field name="model">op.student</field>
            <field name="inherit_id"
                   ref="openeducat_library.view_op_student_form_library_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@name='library']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>
        <record id="view_op_student_form_fees_hide" model="ir.ui.view">
            <field name="model">op.student</field>
            <field name="inherit_id"
                   ref="openeducat_fees.view_op_student_form_fees_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//form[1]/sheet[1]/notebook[1]/page[not(@name)][1]"
                       position="replace"/>
            </field>
        </record>

        <record id="view_op_student_search_inherit" model="ir.ui.view">
            <field name="name">Student search inherited</field>
            <field name="model">op.student</field>
            <field name="inherit_id" ref="openeducat_core.view_op_student_search"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="replace">
                    <search string="Student">
                        <field name="name"/>
                        <field name="gr_no"/>
                        <field name="document_number"/>
                        <field name="partner_id"/>
                        <field name="email"/>
                        <field name="phone"/>
                        <field name="type_of_course_taken"/>
                        <newline/>
                        <filter string="Archived" name="inactive" domain="[('active', '=', False)]"/>
                        <separator/>
                        <filter string="In progress" name="in_process"
                                domain="[('status_student', '=', 'valid'), ('type_of_course_taken.code', 'not in', ['PL', 'DI'])]"/>
                        <filter string="Low" name="in_low"
                                domain="[('status_student', '=', 'low')]"/>
                        <separator/>
                    </search>
                </xpath>
            </field>
        </record>

    </data>
</odoo>
