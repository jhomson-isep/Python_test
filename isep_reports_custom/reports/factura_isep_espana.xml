<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <report id="report_factura_isep_espana"
                model="account.invoice"
                string="Factura ISEP España"
                report_type="qweb-pdf"
                name="isep_reports_custom.factura_isep_espana"
                menu="True"/>

        <template id="assets_backend" inherit_id="web.assets_backend">
             <xpath expr="." position="inside">
                 <link rel="stylesheet" href="/isep_reports_custom/static/src/css/sheet.css"/>
             </xpath>
        </template>

        <template id="factura_isep_espana">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.basic_layout">
                        <div class="page" name="first_page">
                            <link rel="stylesheet" href="/isep_reports_custom/static/src/css/sheet.css"/>
                            <div class="header">
                                <div class="row">
                                    <div class="col-6 blue-design">
                                        <img class="img-fluid logo"
                                                 style="height:125px;padding-top:2px;"
                                                 src="/isep_reports_custom/static/src/img/logo_isep.png"/>
                                    </div>
                                    <div class="col-6 orange-design"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-4">
                                    <strong>Nombre Factura</strong>
                                    <hr class="gray_hr"></hr>
                                </div>
                            </div>
                            <div></div>
                            <div class="row">
                                <div class="col-8"></div>
                                <div class="col-4">
                                    <strong>Dirección</strong>
                                    <hr class="orange_hr"></hr>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-3"><strong>Fecha Factura:</strong></div>
                                <div class="col-3"><strong>Fecha Vencimiento:</strong></div>
                                <div class="col-3"><strong>Fuente:</strong></div>
                                <div class="col-3"><strong>Referencia:</strong></div>
                            </div>
                            <div class="row">
                                <div class="col-3"></div>
                                <div class="col-3"></div>
                                <div class="col-3"></div>
                                <div class="col-3"></div>
                            </div>
                            <div class="row">
                                <table class="StandardTable">
                                    <thead>
                                        <tr>
                                            <th>Descripción</th>
                                            <th class="text-right">Cantidad</th>
                                            <th class="text-right">Precio Unidad</th>
                                            <th t-if="display_discount" class="text-right" groups="sale.group_discount_per_so_line">Disc.(%)</th>
                                            <th class="text-right">Impuestos</th>
                                            <th class="text-right">Precio</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr t-foreach="o.invoice_line_ids" t-as="l">
                                            <td class="orange_gradient"><span t-field="l.name"/></td>
                                            <td class="text-right orange_gradient">
                                                <span t-field="l.quantity"/>
                                                <span t-field="l.uom_id" groups="product.group_uom"/>
                                            </td>

                                            <td class="text-right orange_gradient">
                                                <span t-field="l.price_unit"/>
                                            </td>
                                            <td t-if="display_discount" class="text-right orange_gradient" groups="sale.group_discount_per_so_line">
                                                <span t-field="l.discount"/>
                                            </td>
                                            <td class="text-right orange_gradient">
                                                <span t-esc="', '.join(map(lambda x: (x.description or x.name), l.invoice_line_tax_ids))"/>
                                            </td>
                                            <td class="text-right orange_gradient">
                                                <span t-field="l.price_subtotal" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                                <table class="StandardTable">
                                    <tr>
                                        <td><strong>Subtotal</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_untaxed" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
                                        </td>
                                    </tr>

                                    <t t-foreach="o.tax_line_ids" t-as="t">
                                        <tr>
                                            <td><span t-esc="t.name"/></td>
                                            <td class="text-right">
                                                <span t-esc="t.amount"/>
                                            </td>
                                        </tr>
                                    </t>

                                    <tr class="border-black">
                                        <td><strong>Total</strong></td>
                                        <td class="text-right">
                                             <span t-field="o.amount_total" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
                                        </td>
                                    </tr>
                                </table>
                                <div class="row" t-if="o.tax_line_ids">
                                    <div class="col-xs-6">
                                        <table class="StandardTable">
                                            <thead>
                                                <tr class="orange_tr">
                                                    <th>Impuesto</th>
                                                    <th class="text-right">Base</th>
                                                    <th class="text-right">Importe</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="orange_gradient" t-foreach="o.tax_line_ids" t-as="t">
                                                  <td><span t-field="t.name"/></td>
                                                    <td class="text-right">
                                                        <span t-field="t.base" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-field="t.amount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
                                                    </td>

                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="footer">
                                <div class="row">
                                    <div class="col-6 blue-design"></div>
                                    <div class="col-6 orange-design"></div>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>