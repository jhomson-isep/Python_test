<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="assets_frontend_attendance" name="hr_attendance frontend assets" inherit_id="web.assets_frontend">
        <xpath expr="//script[last()]"  position="after">
            <script type="text/javascript" src="/hr_attendance/static/src/js/employee_kanban_view_handler.js"></script>
            <script type="text/javascript" src="/hr_attendance/static/src/js/greeting_message.js"></script>
            <script type="text/javascript" src="/hr_attendance/static/src/js/kiosk_mode.js"></script>
            <script type="text/javascript" src="/hr_attendance/static/src/js/kiosk_confirm.js"></script>
            <script type="text/javascript" src="/hr_attendance/static/src/js/my_attendances.js"></script>
            <link rel="stylesheet" type="text/scss" href="/hr_attendance/static/src/scss/hr_attendance.scss"/>
        </xpath>
    </template>

    <template id="qunit_suite_frontend" name="hr attendance tests" inherit_id="web.qunit_suite">
        <xpath expr="//script[contains(@src, '/web/static/tests/views/kanban_tests.js')]" position="after">
            <script type="text/javascript" src="/hr_attendance/static/tests/hr_attendance_tests.js"></script>
        </xpath>
    </template>


    <template id="attendance_link" name="Link to frontend portal" inherit_id="portal.frontend_layout">
        <xpath expr="//a[@id='o_logout']" position="before">
            <a href="/my/attendances" role="menuitem" class="dropdown-item">Attendance</a>
        </xpath>
    </template>

     <template id="attendance" name="My Attendance">
         <t t-call="portal.portal_layout">
            <t t-if="employes" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th class="text-right">Id</th>
                        <th class="text-right">Name</th>
                        <th class="text-right">Departament</th>
                        <th class="text-right">Actions</th>
                    </tr>
                </thead>
                <tr t-foreach="employes" t-as="employ">
                        <th class="text-right"><span t-field="employ.id"/></th>
                        <th class="text-right"><span t-field="employ.name"/></th>
                        <th class="text-right"><span t-field="employ.department_id.name"/></th>
                        <th class="text-right">
                            <a t-attf-class="btn btn-sm btn-outline-primary"
                               t-attf-href="/pin/{{employ.id}}">Attendance</a>
                        </th>
                </tr>
            </t>
         </t>
    </template>

    <template id="attendance_create">
        <t t-call="portal.portal_layout">
            <t t-set="additional_title">Registro de asistencia</t>
            <h3>Registro de Asistencia</h3>
            <form action="/my/attendance/create" method="post" enctype="multipart/form-data">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <div class="row o_portal_details">
                    <div class="col-lg-8">
                        <div class="row">
                            <!--
                            <div class="col-lg-12">
                                <div t-if="error_message" class="alert alert-danger" role="alert">
                                    <t t-foreach="error_message" t-as="err"><t t-esc="err"/><br/></t>
                                </div>
                            </div>
                            -->
                            <div t-attf-class="form-group col-xl-6">
                                <label class="col-form-label" for="employee_id">Empleado</label>
                                <input type="text" name="employee_id " t-attf-class="form-control " t-att-value="9"  id="employee_id"/>
                                <label class="col-form-label" for="check_in">Hora de entrada</label>
                                <input type="date" name="check_in" t-attf-class="form-control "  id="check_in"/>
                            </div>

                            <input type="hidden" name="redirect" t-att-value="redirect"/>
                        </div>
                        <div class="clearfix">
                            <button type="submit" class="btn btn-primary float-right mb32 ">
                                Confirm
                                <span class="fa fa-long-arrow-right"/>
                            </button>
                            <a href="/my/attendances" type="button" class="btn btn-primary float-left mb32 ">
                                Back
                                <span class="fa fa-long-arrow-left"/>
                            </a>
                        </div>
                    </div>
                </div>
            </form>
        </t>

    </template>

</odoo>