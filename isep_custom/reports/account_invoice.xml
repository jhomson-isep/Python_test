<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
		<template id="isep_report_invoice_document" inherit_id="account.report_invoice_document">
			<xpath expr="//tr[@t-foreach='o.invoice_line_ids']" position="replace">
				<tr t-foreach="o.invoice_line_ids" t-as="l">
					<t t-if="'Financiaci' not in l.name">
	                    <td><span t-field="l.name"/></td>
	                    <td class="text-right">
	                        <span t-field="l.quantity"/>
	                        <span t-field="l.uom_id" groups="product.group_uom"/>
	                    </td>
	                    <td class="text-right">
	                    	<t t-if="l.product_id.tipodecurso not in ('curso','pgrado','diplo','master','mgrafico')">
	                        	<span t-field="l.price_unit"/>
	                        </t>
	                        <t t-if="l.product_id.tipodecurso in ('curso','pgrado','diplo','master','mgrafico')">
	                        	<span t-field="l.price_unit_report"/>
	                        </t>
	                    </td>
	                    <td t-if="display_discount" class="text-right" groups="sale.group_discount_per_so_line">
	                        <span t-field="l.discount"/>
	                    </td>
	                    <td class="text-right">
	                        <span t-esc="', '.join(map(lambda x: (x.description or x.name), l.invoice_line_tax_ids))"/>
	                    </td>
	                    <td class="text-right">
	                    	<t t-if="l.product_id.tipodecurso not in ('curso','pgrado','diplo','master','mgrafico')">
	                    		<span t-field="l.price_subtotal" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
	                    	</t>
	                    	<t t-if="l.product_id.tipodecurso in ('curso','pgrado','diplo','master','mgrafico')">
	                    		<span t-field="l.price_subtotal_report" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
	                    	</t>
	                    </td>
	                </t>
                </tr>
			</xpath>

			<xpath expr="//tr[@t-foreach='o.tax_line_ids']" position="replace">
				<t t-if="not o.tax_line_ids">
					<tr t-foreach="o.tax_line_ids" t-as="t">
						<td><span t-field="t.name"/></td>
						<td class="text-right">
							<span t-field="t.base" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
						</td>
						<td class="text-right">
							<span t-field="t.amount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
						</td>
					</tr>
				</t>
			</xpath>

			<xpath expr="//t[@t-if='not o.tax_line_ids']" position="before">
				<tr t-foreach="o.group_tax_line" t-as="t">
					<td><span t-field="t.name"/></td>
					<td class="text-right">
						<span t-field="t.base" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
					</td>
					<td class="text-right">
						<span t-field="t.amount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.currency_id&quot;}"/>
					</td>
				</tr>
			</xpath>

		</template>
	</data>
</openerp>